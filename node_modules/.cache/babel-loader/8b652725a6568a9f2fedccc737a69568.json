{"ast":null,"code":"import _classCallCheck from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Nelson/GitHub/nelsonchang.me/src/components/VC.js\";\nimport React, { Component } from 'react';\nimport { Waypoint } from 'react-waypoint';\nimport cx from 'classnames';\nimport { isMobileDevice } from '../functions/browser-detect';\n\nvar VC =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(VC, _Component);\n\n  function VC() {\n    var _this;\n\n    _classCallCheck(this, VC);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VC).call(this));\n    _this.state = {\n      isMobile: isMobileDevice(),\n      isVisible: false,\n      autoplay: false,\n      autoplayError: false\n    };\n\n    _this.onEnter = function () {\n      _this.setState({\n        isVisible: true,\n        autoplay: true\n      });\n\n      if (_this.ref.current.paused && !_this.state.isMobile) {\n        _this.playVideo();\n      }\n    };\n\n    _this.playVideo = function () {\n      try {\n        _this.ref.current.play();\n      } catch (err) {\n        _this.setState({\n          autoplayError: true\n        });\n      }\n    };\n\n    _this.ref = React.createRef();\n    return _this;\n  }\n\n  _createClass(VC, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        _this2.setState({\n          isVisible: false\n        });\n      }, 900);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = cx(this.props.customClass, 'video', {\n        'is-visible': this.state.isVisible\n      });\n      return React.createElement(Waypoint, {\n        scrollableAncestor: window,\n        onEnter: this.onEnter,\n        bottomOffset: \"200px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        autoPlay: !this.state.isMobile && this.state.autoplay,\n        controls: this.state.isMobile || this.state.autoplayError,\n        poster: this.props.poster,\n        loop: true,\n        muted: true,\n        preload: \"meta\",\n        ref: this.ref,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"source\", {\n        src: this.props.src,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), this.props.children)));\n    }\n  }]);\n\n  return VC;\n}(Component);\n\nexport default VC;","map":{"version":3,"sources":["/Users/Nelson/GitHub/nelsonchang.me/src/components/VC.js"],"names":["React","Component","Waypoint","cx","isMobileDevice","VC","state","isMobile","isVisible","autoplay","autoplayError","onEnter","setState","ref","current","paused","playVideo","play","err","createRef","setTimeout","classes","props","customClass","window","poster","src","children"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,EAAP,MAAe,YAAf;AAEA,SAASC,cAAT,QAA+B,6BAA/B;;IAEMC,E;;;;;AACJ,gBAAc;AAAA;;AAAA;;AACZ;AADY,UAKdC,KALc,GAKN;AACNC,MAAAA,QAAQ,EAAEH,cAAc,EADlB;AAENI,MAAAA,SAAS,EAAE,KAFL;AAGNC,MAAAA,QAAQ,EAAE,KAHJ;AAINC,MAAAA,aAAa,EAAE;AAJT,KALM;;AAAA,UAYdC,OAZc,GAYJ,YAAM;AACd,YAAKC,QAAL,CAAc;AACZJ,QAAAA,SAAS,EAAE,IADC;AAEZC,QAAAA,QAAQ,EAAE;AAFE,OAAd;;AAKA,UAAI,MAAKI,GAAL,CAASC,OAAT,CAAiBC,MAAjB,IAA2B,CAAC,MAAKT,KAAL,CAAWC,QAA3C,EAAqD;AACnD,cAAKS,SAAL;AACD;AACF,KArBa;;AAAA,UAuBdA,SAvBc,GAuBF,YAAM;AAChB,UAAI;AACF,cAAKH,GAAL,CAASC,OAAT,CAAiBG,IAAjB;AACD,OAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,cAAKN,QAAL,CAAc;AAAEF,UAAAA,aAAa,EAAE;AAAjB,SAAd;AACD;AACF,KA7Ba;;AAEZ,UAAKG,GAAL,GAAWb,KAAK,CAACmB,SAAN,EAAX;AAFY;AAGb;;;;wCA4BmB;AAAA;;AAClBC,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACR,QAAL,CAAc;AAAEJ,UAAAA,SAAS,EAAE;AAAb,SAAd;AACD,OAFS,EAEP,GAFO,CAAV;AAGD;;;6BAEQ;AACP,UAAMa,OAAO,GAAGlB,EAAE,CAAC,KAAKmB,KAAL,CAAWC,WAAZ,EAAyB,OAAzB,EAAkC;AAClD,sBAAc,KAAKjB,KAAL,CAAWE;AADyB,OAAlC,CAAlB;AAIA,aACE,oBAAC,QAAD;AACE,QAAA,kBAAkB,EAAEgB,MADtB;AAEE,QAAA,OAAO,EAAE,KAAKb,OAFhB;AAGE,QAAA,YAAY,EAAC,OAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE;AAAK,QAAA,SAAS,EAAEU,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,QAAQ,EAAE,CAAC,KAAKf,KAAL,CAAWC,QAAZ,IAAwB,KAAKD,KAAL,CAAWG,QAD/C;AAEE,QAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWC,QAAX,IAAuB,KAAKD,KAAL,CAAWI,aAF9C;AAGE,QAAA,MAAM,EAAE,KAAKY,KAAL,CAAWG,MAHrB;AAIE,QAAA,IAAI,MAJN;AAKE,QAAA,KAAK,MALP;AAME,QAAA,OAAO,EAAC,MANV;AAOE,QAAA,GAAG,EAAE,KAAKZ,GAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQE;AAAQ,QAAA,GAAG,EAAE,KAAKS,KAAL,CAAWI,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EASG,KAAKJ,KAAL,CAAWK,QATd,CADF,CAJF,CADF;AAoBD;;;;EA/Dc1B,S;;AAkEjB,eAAeI,EAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Waypoint } from 'react-waypoint';\nimport cx from 'classnames';\n\nimport { isMobileDevice } from '../functions/browser-detect';\n\nclass VC extends Component {\n  constructor() {\n    super();\n    this.ref = React.createRef();\n  }\n\n  state = {\n    isMobile: isMobileDevice(),\n    isVisible: false,\n    autoplay: false,\n    autoplayError: false,\n  };\n\n  onEnter = () => {\n    this.setState({\n      isVisible: true,\n      autoplay: true,\n    });\n\n    if (this.ref.current.paused && !this.state.isMobile) {\n      this.playVideo();\n    }\n  };\n\n  playVideo = () => {\n    try {\n      this.ref.current.play();\n    } catch (err) {\n      this.setState({ autoplayError: true });\n    }\n  };\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.setState({ isVisible: false });\n    }, 900);\n  }\n\n  render() {\n    const classes = cx(this.props.customClass, 'video', {\n      'is-visible': this.state.isVisible,\n    });\n\n    return (\n      <Waypoint\n        scrollableAncestor={window}\n        onEnter={this.onEnter}\n        bottomOffset=\"200px\">\n        <div className={classes}>\n          <video\n            autoPlay={!this.state.isMobile && this.state.autoplay}\n            controls={this.state.isMobile || this.state.autoplayError}\n            poster={this.props.poster}\n            loop\n            muted\n            preload=\"meta\"\n            ref={this.ref}>\n            <source src={this.props.src} />\n            {this.props.children}\n          </video>\n        </div>\n      </Waypoint>\n    );\n  }\n}\n\nexport default VC;\n"]},"metadata":{},"sourceType":"module"}