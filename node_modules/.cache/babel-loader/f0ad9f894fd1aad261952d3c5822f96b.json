{"ast":null,"code":"import _classCallCheck from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Nelson/GitHub/nelsonchang.me/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Nelson/GitHub/nelsonchang.me/src/components/ShapeOverlays.js\";\nimport React, { Component } from 'react';\nimport cx from 'classnames';\n\nvar ShapeOverlays =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShapeOverlays, _Component);\n\n  function ShapeOverlays() {\n    var _this;\n\n    _classCallCheck(this, ShapeOverlays);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShapeOverlays).call(this));\n    _this.state = {\n      isAnimatedIn: false,\n      numPoints: 4,\n      delayPointsArray: [],\n      delayPointsMax: 70,\n      delayPerPath: 40,\n      timeStart: Date.now()\n    };\n\n    _this.toggle = function () {\n      var range = Math.random() * Math.PI * 2;\n      var delayPointsArray = [];\n\n      for (var i = 0; i < _this.state.numPoints; i++) {\n        var radian = i / (_this.state.numPoints - 1) * Math.PI * 2;\n        delayPointsArray[i] = (Math.sin(radian + range) + 1) / 2 * _this.state.delayPointsMax;\n      }\n\n      _this.setState({\n        delayPointsArray: delayPointsArray\n      });\n\n      if (_this.state.isAnimatedIn === false) {\n        _this.open();\n      } else {\n        _this.close();\n      }\n    };\n\n    _this.open = function () {\n      _this.setState({\n        isAnimatedIn: true,\n        timeStart: Date.now()\n      }, _this.renderLoop);\n    };\n\n    _this.close = function () {\n      _this.setState({\n        isAnimatedIn: false,\n        timeStart: Date.now()\n      }, _this.renderLoop);\n    };\n\n    _this.cubicInOut = function (t) {\n      return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n    };\n\n    _this.updatePath = function (time) {\n      var points = [];\n\n      for (var i = 0; i < _this.state.numPoints; i++) {\n        points[i] = _this.cubicInOut(Math.min(Math.max(time - _this.state.delayPointsArray[i], 0) / _this.props.duration, 1)) * 100;\n      }\n\n      var str = '';\n      str += _this.state.isAnimatedIn ? \"M 0 0 V \".concat(points[0], \" \") : \"M 0 \".concat(points[0], \" \");\n\n      for (var j = 0; j < _this.state.numPoints - 1; j++) {\n        var p = (j + 1) / (_this.state.numPoints - 1) * 100;\n        var cp = p - 1 / (_this.state.numPoints - 1) * 100 / 2;\n        str += \"C \".concat(cp, \" \").concat(points[j], \" \").concat(cp, \" \").concat(points[j + 1], \" \").concat(p, \" \").concat(points[j + 1], \" \");\n      }\n\n      str += _this.state.isAnimatedIn ? \"V 0 H 0\" : \"V 100 H 0\";\n      return str;\n    };\n\n    _this.animate = function () {\n      if (_this.state.isAnimatedIn) {\n        for (var i = 0; i < _this.path.length; i++) {\n          _this.path[i].setAttribute('d', _this.updatePath(Date.now() - (_this.state.timeStart + _this.state.delayPerPath * i)));\n        }\n      } else {\n        for (var j = 0; j < _this.path.length; j++) {\n          _this.path[j].setAttribute('d', _this.updatePath(Date.now() - (_this.state.timeStart + _this.state.delayPerPath * (_this.path.length - j - 1))));\n        }\n      }\n    };\n\n    _this.renderLoop = function () {\n      _this.animate();\n\n      if (Date.now() - _this.state.timeStart < _this.props.duration + _this.state.delayPerPath * (_this.path.length - 1) + _this.state.delayPointsMax) {\n        requestAnimationFrame(function () {\n          _this.renderLoop();\n        });\n      }\n    };\n\n    _this.elem = React.createRef();\n    return _this;\n  }\n\n  _createClass(ShapeOverlays, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.path = this.elem.current.querySelectorAll('path');\n\n      if (this.props.startOpen) {\n        this.path[0].setAttribute('d', 'M 0 0 V 100 C 25 100 25 100 50 100 C 75 100 75 100 100 100 V 0 H 0');\n        this.setState({\n          isAnimatedIn: true\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.isAnimatedIn !== this.props.isAnimatedIn) {\n        this.toggle();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"shape\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        className: cx(this.props.customClass, \"shape-overlays\"),\n        viewBox: \"0 0 100 100\",\n        preserveAspectRatio: \"none\",\n        ref: this.elem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        className: \"shape-overlays__path\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      })), this.props.children);\n    }\n  }]);\n\n  return ShapeOverlays;\n}(Component);\n\nexport default ShapeOverlays;","map":{"version":3,"sources":["/Users/Nelson/GitHub/nelsonchang.me/src/components/ShapeOverlays.js"],"names":["React","Component","cx","ShapeOverlays","state","isAnimatedIn","numPoints","delayPointsArray","delayPointsMax","delayPerPath","timeStart","Date","now","toggle","range","Math","random","PI","i","radian","sin","setState","open","close","renderLoop","cubicInOut","t","pow","updatePath","time","points","min","max","props","duration","str","j","p","cp","animate","path","length","setAttribute","requestAnimationFrame","elem","createRef","current","querySelectorAll","startOpen","prevProps","customClass","children"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cx from 'classnames';\n\nclass ShapeOverlays extends Component {\n  constructor() {\n    super();\n    this.elem = React.createRef();\n  }\n\n  state = {\n    isAnimatedIn: false,\n    numPoints: 4,\n    delayPointsArray: [],\n    delayPointsMax: 70,\n    delayPerPath: 40,\n    timeStart: Date.now(),\n  }\n\n  toggle = () => {\n    const range = Math.random() * Math.PI * 2;\n    const delayPointsArray = [];\n\n    for (var i = 0; i < this.state.numPoints; i++) {\n      const radian = (i / (this.state.numPoints - 1)) * Math.PI * 2;\n      delayPointsArray[i] = (Math.sin(radian + range) + 1) / 2 * this.state.delayPointsMax;\n    }\n\n    this.setState({ delayPointsArray });\n\n    if (this.state.isAnimatedIn === false) {\n      this.open();\n    } else {\n      this.close();\n    }\n  }\n\n  open = () => {\n    this.setState({\n      isAnimatedIn: true,\n      timeStart: Date.now(),\n    }, this.renderLoop);\n  }\n\n  close = () => {\n    this.setState({\n      isAnimatedIn: false,\n      timeStart: Date.now(),\n    }, this.renderLoop);\n  }\n\n  cubicInOut = (t) => {\n    return t < 0.5\n      ? 4.0 * t * t * t\n      : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n  }\n\n  updatePath = (time) => {\n    const points = [];\n\n    for (let i = 0; i < this.state.numPoints; i++) {\n      points[i] = this.cubicInOut(\n        Math.min(\n          Math.max(time - this.state.delayPointsArray[i], 0) / this.props.duration, 1)\n        ) * 100;\n    }\n\n    let str = '';\n    str += (this.state.isAnimatedIn) ? `M 0 0 V ${points[0]} ` : `M 0 ${points[0]} `;\n\n    for (let j = 0; j < this.state.numPoints - 1; j++) {\n      const p = (j + 1) / (this.state.numPoints - 1) * 100;\n      const cp = p - (1 / (this.state.numPoints - 1) * 100) / 2;\n      str += `C ${cp} ${points[j]} ${cp} ${points[j + 1]} ${p} ${points[j + 1]} `;\n    }\n\n    str += (this.state.isAnimatedIn) ? `V 0 H 0` : `V 100 H 0`;\n    return str;\n  }\n\n  animate = () => {\n    if (this.state.isAnimatedIn) {\n      for (let i = 0; i < this.path.length; i++) {\n        this.path[i].setAttribute('d', this.updatePath(Date.now() - (this.state.timeStart + this.state.delayPerPath * i)));\n      }\n    } else {\n      for (let j = 0; j < this.path.length; j++) {\n        this.path[j].setAttribute('d', this.updatePath(Date.now() - (this.state.timeStart + this.state.delayPerPath * (this.path.length - j - 1))));\n      }\n    }\n  }\n\n  renderLoop = () => {\n    this.animate();\n    if (Date.now() - this.state.timeStart < this.props.duration + this.state.delayPerPath * (this.path.length - 1) + this.state.delayPointsMax) {\n      requestAnimationFrame(() => {\n        this.renderLoop();\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.path = this.elem.current.querySelectorAll('path');\n\n    if (this.props.startOpen) {\n      this.path[0].setAttribute('d', 'M 0 0 V 100 C 25 100 25 100 50 100 C 75 100 75 100 100 100 V 0 H 0');\n      this.setState({ isAnimatedIn: true });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.isAnimatedIn !== this.props.isAnimatedIn) {\n      this.toggle();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"shape\">\n        <svg\n          className={cx(\n            this.props.customClass,\n            \"shape-overlays\"\n          )}\n          viewBox=\"0 0 100 100\"\n          preserveAspectRatio=\"none\"\n          ref={this.elem}>\n          <path className=\"shape-overlays__path\"></path>\n        </svg>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default ShapeOverlays;\n"]},"metadata":{},"sourceType":"module"}