function canv_mousemove(t){mouseX=t.clientX,mouseY=t.clientY}function Pixel(t,e){this.startX=t,this.startY=e,this.x=t,this.y=Math.random()*canvasH,this.xVelocity=0,this.yVelocity=0}function timer(){if(timerRunning)setTimeout(timer,10);else{timerRunning=!0,setTimeout(timer,20);for(var t=0;t<pixels.length;t++)pixels[t].move();drawPixels(),n++,n%20!==0||canvasW==document.body.clientWidth&&canvasH==document.body.clientHeight||body_resize(),timerRunning=!1}}function drawPixels(){for(var t,e,n,o,i,a=ctx.createImageData(canvasW,canvasH),s=a.data,l=0;l<pixels.length;l++)for(e=Math.floor(pixels[l].x),n=Math.floor(pixels[l].y),o=e;e+1>=o&&o>=0&&canvasW>o;o++)for(i=n;n+1>=i&&i>=0&&canvasH>i;i++)t=4*(i*a.width+o),s[t]=234,s[t+1]=184,s[t+2]=47,s[t+3]=255;a.data=s,ctx.putImageData(a,0,0)}function init(){wordCtx.font=fontSize+"px "+defaultFont,wordCtx.clearRect(0,0,canvasW,canvasH),wordCtx.textAlign="center",wordCtx.textBaseline="middle";for(var t=0;t<txt.length;t++)wordCtx.fillText(txt[t],canvasW/2,canvasH/2-fontSize*(txt.length/2-(t+.5)));for(var e=0,n=wordCtx.getImageData(0,0,canvasW,canvasH),o=0;o<n.width;o+=resolution)for(var a=0;a<n.height;a+=resolution)i=4*(a*n.width+o),n.data[i+3]>128&&(e>=pixels.length?pixels[e]=new Pixel(o,a):(pixels[e].startX=o,pixels[e].startY=a),e++);pixels.splice(e,pixels.length-e)}function body_resize(){canvasW=document.body.clientWidth,canvasH=document.body.clientHeight,canv.width=canvasW,canv.height=canvasH,wordCanv.width=canvasW,wordCanv.height=canvasH,480>canvasW?(fontSize=80,words="NELSON",txt=words.split("\n")):550>canvasW?(fontSize=110,words="NELSON",txt=words.split("\n")):860>canvasW?(fontSize=120,words="NELSON",txt=words.split("\n")):1024>canvasW?(fontSize=100,words="NELSON CHANG",txt=words.split("\n")):(fontSize=110,words="NELSON CHANG",txt=words.split("\n"))}function preventDefault(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1}function preventDefaultForScrollKeys(t){return keys[t.keyCode]?(preventDefault(t),!1):void 0}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}var pixels=[],canv=document.getElementById("canv"),ctx=canv.getContext("2d"),wordCanv=document.createElement("canvas"),wordCtx=wordCanv.getContext("2d"),mouseX,mouseY,words="NELSON CHANG",txt=words.split("\n"),fontSize=110,defaultFont="Kanji",canvasW,canvasH,resolution=1,n=0,timerRunning=!1;Pixel.prototype.move=function(){var t,e,n=this.startX-this.x,o=this.startY-this.y,i=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),a=.01*i,s=Math.atan2(o,n);if(mouseX>=0){var l=this.x-mouseX,r=this.y-mouseY,c=Math.pow(l,2)+Math.pow(r,2);t=Math.min(2500/c,5),e=Math.atan2(r,l)}else t=0,e=0;this.xVelocity+=a*Math.cos(s)+t*Math.cos(e),this.yVelocity+=a*Math.sin(s)+t*Math.sin(e),this.xVelocity*=0.9,this.yVelocity*=0.9,this.x+=this.xVelocity,this.y+=this.yVelocity},body_resize(),timer();var $window=$(window);$window.resize(function(){body_resize(),init()});var keys={37:1,38:1,39:1,40:1};!function(){$("#work").click(function(){$(".works").addClass("works-menu"),disableScroll()}),$(".enter span").click(function(){$(".works").addClass("works-menu"),disableScroll()}),$("#about").click(function(){$(".about").addClass("about-show"),disableScroll()}),$(".close, .self").click(function(){$(".works-menu").removeClass("works-menu"),enableScroll()}),$(".close-about").click(function(){$(".about-show").removeClass("about-show"),enableScroll()}),$(document).mouseup(function(t){var e=$(".about");e.is(t.target)||0!==e.has(t.target).length||($(".about-show").removeClass("about-show"),enableScroll())})}(),function(){var t=$("#loader");$(window).load(function(){setTimeout(function(){t.addClass("svg-container-close"),init()},1500),setTimeout(function(){t.remove()},2100)})}();